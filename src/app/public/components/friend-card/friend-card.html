<article
  class="bg-[#F0F4F9]/70 backdrop-blur-sm rounded-lg shadow-lg border border-[#757575]/60 p-3 md:p-4 flex flex-col gap-3 w-full overflow-hidden"
>
  <!-- Título -->
  <div class="flex items-center gap-2 px-1">
    <mat-icon class="text-[#9811fb] text-xl md:text-2xl">people</mat-icon>
    <span class="font-semibold text-sm md:text-base lg:text-xl">Sugerencias de amistad</span>
  </div>

  <!-- Loading -->
  @if (loading) {
  <div class="text-center text-gray-600 py-4 text-sm">Cargando usuarios...</div>
  } @else {
  <!-- Slider Container -->
  <div class="relative px-8 md:px-10 2xl:px-0">
    <!-- Botón Anterior (mobile/tablet) -->
    <button
      (click)="prevPage()"
      [disabled]="!paginationParams.hasPreviousPage"
      class="absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-white/95 hover:bg-white rounded-full p-1.5 md:p-2 shadow-lg disabled:opacity-30 disabled:cursor-not-allowed transition-all 2xl:hidden"
    >
      <mat-icon class="text-[#9811fb] text-xl md:text-2xl">chevron_left</mat-icon>
    </button>

    <!-- Contenedor de cards con scroll horizontal -->
    <div
      class="flex gap-3 md:gap-4 overflow-x-auto scroll-smooth pb-2 scrollbar-hide snap-x snap-mandatory 2xl:flex-col 2xl:overflow-x-visible 2xl:gap-3"
    >
      @for (user of users; track user.email) {
      <!-- Card -->
      <div
        class="flex-shrink-0 w-[260px] sm:w-[280px] md:w-[320px] lg:w-[350px] snap-center flex flex-row items-center gap-3 bg-white rounded-lg shadow-md border border-[#d1d1d1] p-3 hover:shadow-xl transition-all 2xl:w-full 2xl:snap-align-none"
      >
        <!-- Imagen -->
        <img
          src="../../../../assets/images/defaultUser.png"
          alt="Usuario"
          class="w-14 h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full object-cover flex-shrink-0 border-2 border-[#9811fb]/20"
        />

        <!-- Contenido -->
        <div class="flex flex-col flex-1 gap-2 min-w-0">
          <span class="font-semibold text-gray-800 text-xs md:text-sm lg:text-base truncate">
            {{ user.fullName || 'Usuario desconocido' }}
          </span>

          <div class="flex flex-wrap gap-1.5">
            <span
              class="px-2 py-0.5 text-xs bg-gray-100 border border-gray-300 rounded-full text-gray-700"
            >
              {{ user.country }}
            </span>
            <span
              class="px-2 py-0.5 text-xs bg-gray-100 border border-gray-300 rounded-full text-gray-700"
            >
              +1
            </span>
          </div>

          <button
            (click)="sendFriendRequest(user.id)"
            [disabled]="sendingRequest[user.id]"
            class="w-full py-1.5 md:py-2 text-xs md:text-sm bg-[#9811fb] text-white rounded-lg font-medium hover:bg-[#7d0fd0] transition-all disabled:opacity-50 disabled:cursor-not-allowed"
          >
            @if (sendingRequest[user.id]) {
            <span>Enviando...</span>
            } @else {
            <span>Añadir amigo</span>
            }
          </button>
        </div>
      </div>
      } @empty {
      <div class="text-center text-gray-600 py-8 w-full text-sm">
        No hay sugerencias disponibles
      </div>
      }
    </div>

    <!-- Botón Siguiente (mobile/tablet) -->
    <button
      (click)="nextPage()"
      [disabled]="!paginationParams.hasNextPage"
      class="absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-white/95 hover:bg-white rounded-full p-1.5 md:p-2 shadow-lg disabled:opacity-30 disabled:cursor-not-allowed transition-all 2xl:hidden"
    >
      <mat-icon class="text-[#9811fb] text-xl md:text-2xl">chevron_right</mat-icon>
    </button>
  </div>

  <!-- Paginación para desktop (2xl+) -->
  <div class="hidden 2xl:flex justify-between items-center mt-2 px-1">
    <button
      (click)="prevPage()"
      [disabled]="!paginationParams.hasPreviousPage"
      class="flex items-center gap-1 px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all"
    >
      <mat-icon class="text-base">chevron_left</mat-icon>
      <span>Anterior</span>
    </button>

    <span class="text-xs text-gray-600">
      Página {{ paginationParams.page }} de {{ paginationParams.pageCount }}
    </span>

    <button
      (click)="nextPage()"
      [disabled]="!paginationParams.hasNextPage"
      class="flex items-center gap-1 px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all"
    >
      <span>Siguiente</span>
      <mat-icon class="text-base">chevron_right</mat-icon>
    </button>
  </div>
  }
</article>
